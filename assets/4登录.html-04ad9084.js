const s=JSON.parse(`{"key":"v-8ee73cda","path":"/backEnd/PHP/%E6%A1%86%E6%9E%B6/FastAdmin/4%E7%99%BB%E5%BD%95.html","title":"登录功能","lang":"zh-CN","frontmatter":{"title":"登录功能","icon":"bijiben","category":"php","order":4,"description":"✒️登录流程图 application\\\\home\\\\controller\\\\Index.php /** * 登录 */ public function login() { if ($this-&gt;request-&gt;isPost()) { $mobile = $this-&gt;request-&gt;param('mobile', '', 'trim'); $password = $this-&gt;request-&gt;param('password', '', 'trim'); $business = $this-&gt;BusinessModel-&gt;where(['mobile' =&gt; $mobile])-&gt;find(); if (!$business) { $this-&gt;error('用户不存在'); } if (md5($password . $business['salt']) != $business['password']) { $this-&gt;error('密码错误'); } $data = [ 'id' =&gt; $business['id'], 'mobile' =&gt; $business['mobile'] ]; cookie('LoginBusiness', $data); $this-&gt;success('登录成功', url('home/business/index')); } return $this-&gt;fetch(); }","head":[["meta",{"property":"og:url","content":"https://ycyang.site/blog/backEnd/PHP/%E6%A1%86%E6%9E%B6/FastAdmin/4%E7%99%BB%E5%BD%95.html"}],["meta",{"property":"og:site_name","content":"寒舞知识宝库"}],["meta",{"property":"og:title","content":"登录功能"}],["meta",{"property":"og:description","content":"✒️登录流程图 application\\\\home\\\\controller\\\\Index.php /** * 登录 */ public function login() { if ($this-&gt;request-&gt;isPost()) { $mobile = $this-&gt;request-&gt;param('mobile', '', 'trim'); $password = $this-&gt;request-&gt;param('password', '', 'trim'); $business = $this-&gt;BusinessModel-&gt;where(['mobile' =&gt; $mobile])-&gt;find(); if (!$business) { $this-&gt;error('用户不存在'); } if (md5($password . $business['salt']) != $business['password']) { $this-&gt;error('密码错误'); } $data = [ 'id' =&gt; $business['id'], 'mobile' =&gt; $business['mobile'] ]; cookie('LoginBusiness', $data); $this-&gt;success('登录成功', url('home/business/index')); } return $this-&gt;fetch(); }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-17T08:39:15.000Z"}],["meta",{"property":"article:author","content":"Mr.DanceCold"}],["meta",{"property":"article:modified_time","content":"2023-08-17T08:39:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"登录功能\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-17T08:39:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.DanceCold\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"✒️登录流程图","slug":"✒️登录流程图","link":"#✒️登录流程图","children":[]},{"level":2,"title":"✨追加字段与加密手机号","slug":"✨追加字段与加密手机号","link":"#✨追加字段与加密手机号","children":[]},{"level":2,"title":"✨创建home公共控制器","slug":"✨创建home公共控制器","link":"#✨创建home公共控制器","children":[]},{"level":2,"title":"✨注销功能","slug":"✨注销功能","link":"#✨注销功能","children":[]},{"level":2,"title":"✨登录验证","slug":"✨登录验证","link":"#✨登录验证","children":[]},{"level":2,"title":"🛠️代码重构优化","slug":"🛠️代码重构优化","link":"#🛠️代码重构优化","children":[]}],"git":{"createdTime":1692261555000,"updatedTime":1692261555000,"contributors":[{"name":"hanwu","email":"hanwu1314@outlook.com","commits":1}]},"readingTime":{"minutes":4.2,"words":1260},"filePathRelative":"backEnd/PHP/框架/FastAdmin/4登录.md","localizedDate":"2023年8月17日","excerpt":"<h2> ✒️登录流程图</h2>\\n<p></p>\\n<p><code>application\\\\home\\\\controller\\\\Index.php</code></p>\\n<div class=\\"language-php line-numbers-mode\\" data-ext=\\"php\\"><pre class=\\"language-php\\"><code>    <span class=\\"token doc-comment comment\\">/**\\n     * 登录\\n     */</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">function</span> <span class=\\"token function-definition function\\">login</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token property\\">request</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">isPost</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token variable\\">$mobile</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token property\\">request</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">param</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'mobile'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">''</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'trim'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token variable\\">$password</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token property\\">request</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">param</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'password'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">''</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'trim'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n            <span class=\\"token variable\\">$business</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token property\\">BusinessModel</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">where</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'mobile'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$mobile</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">find</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n            <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span><span class=\\"token variable\\">$business</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'用户不存在'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span>\\n            <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token function\\">md5</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$password</span> <span class=\\"token operator\\">.</span> <span class=\\"token variable\\">$business</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'salt'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">!=</span> <span class=\\"token variable\\">$business</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'password'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">error</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'密码错误'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span>\\n\\n            <span class=\\"token variable\\">$data</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">[</span>\\n                <span class=\\"token string single-quoted-string\\">'id'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$business</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'id'</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">,</span>\\n                <span class=\\"token string single-quoted-string\\">'mobile'</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token variable\\">$business</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'mobile'</span><span class=\\"token punctuation\\">]</span>\\n            <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token function\\">cookie</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'LoginBusiness'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$data</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n            <span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">success</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'登录成功'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token function\\">url</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'home/business/index'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token variable\\">$this</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">fetch</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"Mr.DanceCold"},"autoDesc":true}`);export{s as data};
