const s=JSON.parse(`{"key":"v-07299f36","path":"/backEnd/PHP/%E5%9F%BA%E7%A1%80/12PHP%E5%88%86%E9%A1%B5.html","title":"PHP分页","lang":"zh-CN","frontmatter":{"title":"PHP分页","icon":"bijiben","category":"php","order":12,"description":"分页 1. 连接数据库 $db = new PDO('mysql:dbname=phpedu', 'root', 'root'); // 2. 当前页, 在GET参数中 // https://www.php.com/course.html?p=5 // $page = isset($_GET['p']) ? $_GET['p'] : 1; // null合并 $page = $_GET['p'] ?? 1; echo \\"当前页: p= $page &lt;br&gt;\\"; // 3. 每页显示数量 $num = 5; // 4. 记录总数 $sql = 'SELECT COUNT(\`id\`) AS \`total\` FROM \`staff\`'; $stmt = $db-&gt;prepare($sql); $stmt-&gt;execute(); // 将列绑定到PHP变量 , \`total\` =&gt; $total $stmt-&gt;bindColumn('total', $total); //从结果集中获取下一行 $stmt-&gt;fetch(PDO::FETCH_ASSOC); echo \\"总记录数量: $total &lt;br&gt;\\"; // 5. 总页数 // ceil: 向上取整,不丢数据 $pages = ceil($total / $num); echo \\"总页数: $pages &lt;br&gt;\\"; // 6. 偏移量 // offset = (page - 1) * num $offset = ($page - 1) * $num; echo \\"偏移量: $offset &lt;br&gt;\\"; // 7. 分页数据 // $sql = \\"SELECT * FROM \`staff\` LIMIT $num OFFSET $offset\\"; $sql = \\"SELECT * FROM \`staff\` LIMIT $offset, $num\\"; $stmt = $db-&gt;prepare($sql); $stmt-&gt;execute(); $staffs = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC); // 遍历 echo '&lt;hr&gt;'; if (count($staffs) === 0) { echo '查询结果为空'; } else { foreach ($staffs as $staff) { extract($staff); printf('$d-%s-%s-%s&lt;br&gt;', $id, $name, $sex, $email); } }","head":[["meta",{"property":"og:url","content":"https://ycyang.site/blog/backEnd/PHP/%E5%9F%BA%E7%A1%80/12PHP%E5%88%86%E9%A1%B5.html"}],["meta",{"property":"og:site_name","content":"寒舞知识宝库"}],["meta",{"property":"og:title","content":"PHP分页"}],["meta",{"property":"og:description","content":"分页 1. 连接数据库 $db = new PDO('mysql:dbname=phpedu', 'root', 'root'); // 2. 当前页, 在GET参数中 // https://www.php.com/course.html?p=5 // $page = isset($_GET['p']) ? $_GET['p'] : 1; // null合并 $page = $_GET['p'] ?? 1; echo \\"当前页: p= $page &lt;br&gt;\\"; // 3. 每页显示数量 $num = 5; // 4. 记录总数 $sql = 'SELECT COUNT(\`id\`) AS \`total\` FROM \`staff\`'; $stmt = $db-&gt;prepare($sql); $stmt-&gt;execute(); // 将列绑定到PHP变量 , \`total\` =&gt; $total $stmt-&gt;bindColumn('total', $total); //从结果集中获取下一行 $stmt-&gt;fetch(PDO::FETCH_ASSOC); echo \\"总记录数量: $total &lt;br&gt;\\"; // 5. 总页数 // ceil: 向上取整,不丢数据 $pages = ceil($total / $num); echo \\"总页数: $pages &lt;br&gt;\\"; // 6. 偏移量 // offset = (page - 1) * num $offset = ($page - 1) * $num; echo \\"偏移量: $offset &lt;br&gt;\\"; // 7. 分页数据 // $sql = \\"SELECT * FROM \`staff\` LIMIT $num OFFSET $offset\\"; $sql = \\"SELECT * FROM \`staff\` LIMIT $offset, $num\\"; $stmt = $db-&gt;prepare($sql); $stmt-&gt;execute(); $staffs = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC); // 遍历 echo '&lt;hr&gt;'; if (count($staffs) === 0) { echo '查询结果为空'; } else { foreach ($staffs as $staff) { extract($staff); printf('$d-%s-%s-%s&lt;br&gt;', $id, $name, $sex, $email); } }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-07T02:59:32.000Z"}],["meta",{"property":"article:author","content":"Mr.DanceCold"}],["meta",{"property":"article:modified_time","content":"2023-08-07T02:59:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"PHP分页\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-07T02:59:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.DanceCold\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"分页","slug":"分页","link":"#分页","children":[]}],"git":{"createdTime":1691377172000,"updatedTime":1691377172000,"contributors":[{"name":"hanwu","email":"hanwu1314@outlook.com","commits":1}]},"readingTime":{"minutes":1.51,"words":453},"filePathRelative":"backEnd/PHP/基础/12PHP分页.md","localizedDate":"2023年8月7日","excerpt":"<h2> 分页</h2>\\n<div class=\\"language-php line-numbers-mode\\" data-ext=\\"php\\"><pre class=\\"language-php\\"><code><span class=\\"token number\\">1.</span> 连接数据库\\n<span class=\\"token variable\\">$db</span> <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">PDO</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'mysql:dbname=phpedu'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'root'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string single-quoted-string\\">'root'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 2. 当前页, 在GET参数中</span>\\n<span class=\\"token comment\\">// https://www.php.com/course.html?p=5</span>\\n<span class=\\"token comment\\">// $page = isset($_GET['p']) ? $_GET['p'] : 1;</span>\\n<span class=\\"token comment\\">// null合并</span>\\n<span class=\\"token variable\\">$page</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$_GET</span><span class=\\"token punctuation\\">[</span><span class=\\"token string single-quoted-string\\">'p'</span><span class=\\"token punctuation\\">]</span> <span class=\\"token operator\\">??</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">echo</span> <span class=\\"token string double-quoted-string\\">\\"当前页: p= <span class=\\"token interpolation\\"><span class=\\"token variable\\">$page</span></span> &lt;br&gt;\\"</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 3. 每页显示数量</span>\\n<span class=\\"token variable\\">$num</span> <span class=\\"token operator\\">=</span> <span class=\\"token number\\">5</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 4. 记录总数</span>\\n<span class=\\"token variable\\">$sql</span> <span class=\\"token operator\\">=</span> <span class=\\"token string single-quoted-string\\">'SELECT COUNT(\`id\`) AS \`total\` FROM \`staff\`'</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$stmt</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$db</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">prepare</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$sql</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$stmt</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 将列绑定到PHP变量 , \`total\` =&gt; $total</span>\\n<span class=\\"token variable\\">$stmt</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">bindColumn</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'total'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$total</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">//从结果集中获取下一行</span>\\n<span class=\\"token variable\\">$stmt</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">fetch</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name static-context\\">PDO</span><span class=\\"token operator\\">::</span><span class=\\"token constant\\">FETCH_ASSOC</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">echo</span> <span class=\\"token string double-quoted-string\\">\\"总记录数量: <span class=\\"token interpolation\\"><span class=\\"token variable\\">$total</span></span> &lt;br&gt;\\"</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 5. 总页数</span>\\n<span class=\\"token comment\\">// ceil: 向上取整,不丢数据</span>\\n<span class=\\"token variable\\">$pages</span> <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ceil</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$total</span> <span class=\\"token operator\\">/</span> <span class=\\"token variable\\">$num</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">echo</span> <span class=\\"token string double-quoted-string\\">\\"总页数: <span class=\\"token interpolation\\"><span class=\\"token variable\\">$pages</span></span> &lt;br&gt;\\"</span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token comment\\">// 6. 偏移量</span>\\n<span class=\\"token comment\\">// offset = (page - 1) * num</span>\\n<span class=\\"token variable\\">$offset</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$page</span> <span class=\\"token operator\\">-</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">*</span> <span class=\\"token variable\\">$num</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">echo</span> <span class=\\"token string double-quoted-string\\">\\"偏移量: <span class=\\"token interpolation\\"><span class=\\"token variable\\">$offset</span></span> &lt;br&gt;\\"</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 7. 分页数据</span>\\n<span class=\\"token comment\\">// $sql = \\"SELECT * FROM \`staff\` LIMIT $num OFFSET $offset\\";</span>\\n<span class=\\"token variable\\">$sql</span> <span class=\\"token operator\\">=</span> <span class=\\"token string double-quoted-string\\">\\"SELECT * FROM \`staff\` LIMIT <span class=\\"token interpolation\\"><span class=\\"token variable\\">$offset</span></span>, <span class=\\"token interpolation\\"><span class=\\"token variable\\">$num</span></span>\\"</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$stmt</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$db</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">prepare</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$sql</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$stmt</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">execute</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token variable\\">$staffs</span> <span class=\\"token operator\\">=</span> <span class=\\"token variable\\">$stmt</span><span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">fetchAll</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name static-context\\">PDO</span><span class=\\"token operator\\">::</span><span class=\\"token constant\\">FETCH_ASSOC</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token comment\\">// 遍历</span>\\n<span class=\\"token keyword\\">echo</span> <span class=\\"token string single-quoted-string\\">'&lt;hr&gt;'</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token function\\">count</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$staffs</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">===</span> <span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">echo</span> <span class=\\"token string single-quoted-string\\">'查询结果为空'</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">else</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">foreach</span> <span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$staffs</span> <span class=\\"token keyword\\">as</span> <span class=\\"token variable\\">$staff</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">extract</span><span class=\\"token punctuation\\">(</span><span class=\\"token variable\\">$staff</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token function\\">printf</span><span class=\\"token punctuation\\">(</span><span class=\\"token string single-quoted-string\\">'$d-%s-%s-%s&lt;br&gt;'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$id</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$name</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$sex</span><span class=\\"token punctuation\\">,</span> <span class=\\"token variable\\">$email</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"Mr.DanceCold"},"autoDesc":true}`);export{s as data};
