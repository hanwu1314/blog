import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,e as t}from"./app-33e608cd.js";const p={},o=t(`<p><code>funcitons.php</code></p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function-definition function">randomStr</span><span class="token punctuation">(</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token variable">$special</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span>
<span class="token punctuation">{</span>
    <span class="token variable">$chars</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token string double-quoted-string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;f&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;g&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;h&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;i&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;j&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;k&quot;</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">&quot;l&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;m&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;n&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;o&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;p&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;q&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;s&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;t&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;u&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;v&quot;</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">&quot;w&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;z&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;C&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;D&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;E&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;F&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;G&quot;</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">&quot;H&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;I&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;J&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;K&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;L&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;M&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;N&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;O&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;P&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Q&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;R&quot;</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">&quot;S&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;T&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;U&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;V&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;W&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;X&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Y&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;Z&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;2&quot;</span><span class="token punctuation">,</span>
        <span class="token string double-quoted-string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;9&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$special</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$chars</span> <span class="token operator">=</span> <span class="token function">array_merge</span><span class="token punctuation">(</span><span class="token variable">$chars</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string double-quoted-string">&quot;!&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;@&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;#&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;$&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;?&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;|&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;{&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;:&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;;&quot;</span><span class="token punctuation">,</span>
            <span class="token string double-quoted-string">&quot;%&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;^&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;&amp;&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;(&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;)&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;-&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;_&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;[&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;]&quot;</span><span class="token punctuation">,</span>
            <span class="token string double-quoted-string">&quot;}&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;&lt;&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;~&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;+&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;=&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;.&quot;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token variable">$charsLen</span> <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$chars</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token variable">$chars</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//打乱数组顺序</span>
    <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 用来拼接的</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$len</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$str</span> <span class="token operator">.=</span> <span class="token variable">$chars</span><span class="token punctuation">[</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token variable">$charsLen</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">//随机取出一位</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token variable">$str</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>imgcode.php</code></p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 引入函数库</span>
<span class="token keyword">include_once</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;functions.php&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义验证码的宽高</span>
<span class="token variable">$width</span> <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
<span class="token variable">$height</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span>

<span class="token comment">// 创建画布</span>
<span class="token variable">$img</span> <span class="token operator">=</span> <span class="token function">imagecreatetruecolor</span><span class="token punctuation">(</span><span class="token variable">$width</span><span class="token punctuation">,</span><span class="token variable">$height</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义背景色</span>
<span class="token variable">$bgColor</span> <span class="token operator">=</span> <span class="token function">imagecolorallocate</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token number">238</span><span class="token punctuation">,</span><span class="token number">238</span><span class="token punctuation">,</span><span class="token number">238</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 把背景色加入画布</span>
<span class="token function">imagefilledrectangle</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$width</span><span class="token punctuation">,</span><span class="token variable">$height</span><span class="token punctuation">,</span><span class="token variable">$bgColor</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 调用四次随机生成字符串的函数，因为每个字符出现的位置都是随机</span>


<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">randomStr</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$strArray</span> <span class="token operator">=</span> <span class="token function">str_split</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment">// 定义字体的路径 必须用绝对路径</span>
<span class="token variable">$font</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;G:\\px\\admin\\assets\\fonts\\OpenSans-Light.ttf&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// 定义字体颜色</span>
<span class="token variable">$textColor</span> <span class="token operator">=</span> <span class="token function">imagecolorallocate</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 把字符加入画布</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$j</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$j</span> <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token variable">$j</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">imagettftext</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token operator">*</span><span class="token variable">$j</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token variable">$textColor</span><span class="token punctuation">,</span><span class="token variable">$font</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">[</span><span class="token variable">$j</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 再给画布加入一些点状像素</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">imagesetpixel</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$width</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$height</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">imagecolorallocate</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 再给画布加入一些线像素</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$i</span> <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">imageline</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$width</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$height</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$width</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">$height</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">imagecolorallocate</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 开启会话</span>
<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 存到session</span>
<span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;code&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$str</span><span class="token punctuation">;</span>

<span class="token comment">// 告诉浏览器内容是图片</span>
<span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Content-Type:image/png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出png图片</span>
<span class="token function">imagepng</span><span class="token punctuation">(</span><span class="token variable">$img</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),e=[o];function u(c,l){return s(),a("div",null,e)}const r=n(p,[["render",u],["__file","php验证码.html.vue"]]);export{r as default};
