## 隐藏tab-bar的两种方案

### 通过路由对象值隐藏

```js
        {
            path: "/city",
            component: () => import("@/views/city/city.vue"),
            meta: {
                hideTabBar: true
            }
        }
```


```js
import { useRoute } from 'vue-router'
const route = useRoute()
```

```vue
    <TabBar v-if="!route.meta.hideTabBar" />
```

### 公共样式隐藏至表面

`src\assets\css\common.css`

```css
.top-page {
    position: relative;
    z-index: 9;
    height: 100vh;
    background-color: #fff;

    overflow-y: auto;
}
```


---


## 使用axios

`src\services\request\config.js`

```js
export const BASE_URL = "https://mock.mengxuegu.com/mock/64f53d0be70b8004a69e9b62"
export const TIMEOUT = 10000
```

`src\services\request\index.js`

```js
import axios from 'axios'

import { BASE_URL, TIMEOUT } from './config'

class HWRequest {
  constructor(baseURL, timeout = 10000) {
    this.instance = axios.create({
      baseURL,
      timeout
    })
  }

  request(config) {
    return new Promise((resolve, reject) => {
      this.instance.request(config).then(res => {
        resolve(res.data)
      }).catch(err => {
        reject(err)
      })
    })
  }

  get(config) {
    return this.request({ ...config, method: "get" })
  }

  post(config) {
    return this.request({ ...config, method: "post" })
  }
}

export default new HWRequest(BASE_URL, TIMEOUT)

```


`src\services\modules\city.js`

```js
import hwRequest from '../request'

export function getCityAll() {
  return hwRequest.get({
    url: "/city/all"
  })
}

```



`src\services\index.js`

```js
export * from "./modules/city"
```


### 使用pinia发送网络请求，管理数据

`src\stores\modules\city.js`

```js
import { getCityAll } from '@/services'
import { defineStore } from 'pinia'

const cityStore = defineStore("city", {
    state: () => ({
        allCities: []
    }),
    actions: {
        async fetchAllCitiesData() {
            const res = await getCityAll()
            this.allCities = res.data
        }
    }
})

export default cityStore

```

### 获取数据

`src\views\city\city.vue`

```js
/**城市Store */
const cityStore = useCityStore()
cityStore.fetchAllCitiesData()
const { allCities } = storeToRefs(cityStore)
```

## 城市列表页局部滚动

```less
.top {
    position: relative;
    z-index: 9;
}

// 布局滚动
.content {
    height: calc(100vh - 98px);
    overflow-y: auto;
}
```

`src\views\city\city.vue`

`allCities.value[tabActive.value]` 获取值后会失去响应式，通过computed包裹起来的对象，其内部依赖发生了改变，其值也会发生改变

```js
/**获取选中标签后的数据 */
const currentGroup = computed(() => allCities.value[tabActive.value])
```





